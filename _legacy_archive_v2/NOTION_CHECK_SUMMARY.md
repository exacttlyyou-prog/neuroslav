# –†–µ–∑—é–º–µ –ø—Ä–æ–≤–µ—Ä–∫–∏ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏ —Å Notion

## ‚úÖ –ü—Ä–æ–≤–µ—Ä–µ–Ω–æ

### 1. –í–µ—Ä—Å–∏—è API
- ‚úÖ –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –∞–∫—Ç—É–∞–ª—å–Ω–∞—è –≤–µ—Ä—Å–∏—è **2025-09-03**
- ‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω–∞—è –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è `AsyncClient` —Å `notion_version="2025-09-03"`
- ‚úÖ –°–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å —Å `notion-client==2.2.1` –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∞

### 2. –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ
- ‚úÖ –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –º–µ—Ç–æ–¥ –∞—É—Ç–µ–Ω—Ç–∏—Ñ–∏–∫–∞—Ü–∏–∏ —á–µ—Ä–µ–∑ `NOTION_TOKEN`
- ‚úÖ –¢–æ–∫–µ–Ω –±–µ—Ä–µ—Ç—Å—è –∏–∑ –ø–µ—Ä–µ–º–µ–Ω–Ω—ã—Ö –æ–∫—Ä—É–∂–µ–Ω–∏—è
- ‚úÖ –û–±—Ä–∞–±–æ—Ç–∫–∞ –æ—à–∏–±–æ–∫ –ø—Ä–∏ –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–∏ —Ç–æ–∫–µ–Ω–∞

### 3. –í—ã–≥—Ä—É–∑–∫–∞ –¥–∞–Ω–Ω—ã—Ö –∏–∑ –ø–æ–¥–∫–ª—é—á–µ–Ω–Ω—ã—Ö —Å—Ç—Ä–∞–Ω–∏—Ü

#### –£–ª—É—á—à–µ–Ω–Ω–æ–µ –∏–∑–≤–ª–µ—á–µ–Ω–∏–µ –∫–æ–Ω—Ç–µ–Ω—Ç–∞
- ‚úÖ **–†–µ–∫—É—Ä—Å–∏–≤–Ω–æ–µ –ø–æ–ª—É—á–µ–Ω–∏–µ –±–ª–æ–∫–æ–≤**: –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω –º–µ—Ç–æ–¥ `_get_all_blocks_recursive()`
- ‚úÖ **–ü–∞–≥–∏–Ω–∞—Ü–∏—è**: –û–±—Ä–∞–±–æ—Ç–∫–∞ –≤—Å–µ—Ö —Å—Ç—Ä–∞–Ω–∏—Ü —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ (API –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –º–∞–∫—Å–∏–º—É–º 100 –±–ª–æ–∫–æ–≤)
- ‚úÖ **–ü–æ–¥–¥–µ—Ä–∂–∫–∞ –≤—Å–µ—Ö —Ç–∏–ø–æ–≤ –±–ª–æ–∫–æ–≤**:
  - –¢–µ–∫—Å—Ç–æ–≤—ã–µ: paragraph, heading_1/2/3, bulleted_list_item, numbered_list_item
  - –ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–µ: to_do, toggle, callout, quote
  - –°–ø–µ—Ü–∏–∞–ª—å–Ω—ã–µ: code, table, child_page, child_database
- ‚úÖ **–ò–∑–≤–ª–µ—á–µ–Ω–∏–µ –≤—Å–µ–≥–æ —Ç–µ–∫—Å—Ç–∞**: –ü–æ–ª–Ω–æ–µ –∏–∑–≤–ª–µ—á–µ–Ω–∏–µ –∏–∑ `rich_text` –º–∞—Å—Å–∏–≤–æ–≤

#### –†–∞–±–æ—Ç–∞ —Å –¥–æ—á–µ—Ä–Ω–∏–º–∏ —Å—Ç—Ä–∞–Ω–∏—Ü–∞–º–∏
- ‚úÖ –ú–µ—Ç–æ–¥ `get_ai_context_pages()` –ø–æ–ª—É—á–∞–µ—Ç –≤—Å–µ –¥–æ—á–µ—Ä–Ω–∏–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã —Ä–µ–∫—É—Ä—Å–∏–≤–Ω–æ
- ‚úÖ –û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ–µ –≤–∫–ª—é—á–µ–Ω–∏–µ –ø–æ–ª–Ω–æ–≥–æ –∫–æ–Ω—Ç–µ–Ω—Ç–∞
- ‚úÖ –í–æ–∑–≤—Ä–∞—Ç –º–µ—Ç–∞–¥–∞–Ω–Ω—ã—Ö (ID, –Ω–∞–∑–≤–∞–Ω–∏–µ, URL, –¥–ª–∏–Ω–∞ –∫–æ–Ω—Ç–µ–Ω—Ç–∞)
- ‚úÖ –û–±—Ä–∞–±–æ—Ç–∫–∞ –¥—É–±–ª–∏–∫–∞—Ç–æ–≤

#### –ü–æ–¥–¥–µ—Ä–∂–∫–∞ API –≤–µ—Ä—Å–∏–∏ 2025-09-03
- ‚úÖ –ú–µ—Ç–æ–¥ `_query_database()` –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç data sources
- ‚úÖ –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –±–∞–∑ –¥–∞–Ω–Ω—ã—Ö —Å –Ω–µ—Å–∫–æ–ª—å–∫–∏–º–∏ data sources
- ‚úÖ –û–±—Ä–∞—Ç–Ω–∞—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å —Å –ø—Ä–æ—Å—Ç—ã–º–∏ –±–∞–∑–∞–º–∏ –¥–∞–Ω–Ω—ã—Ö

## üìã –ù–æ–≤—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏

### –ú–µ—Ç–æ–¥—ã –∏–∑–≤–ª–µ—á–µ–Ω–∏—è –∫–æ–Ω—Ç–µ–Ω—Ç–∞

1. **`get_page_content(page_id, include_metadata=False)`**
   - –ü–æ–ª—É—á–∞–µ—Ç –ø–æ–ª–Ω—ã–π –∫–æ–Ω—Ç–µ–Ω—Ç —Å—Ç—Ä–∞–Ω–∏—Ü—ã —Ä–µ–∫—É—Ä—Å–∏–≤–Ω–æ
   - –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –≤—Å–µ—Ö —Ç–∏–ø–æ–≤ –±–ª–æ–∫–æ–≤
   - –û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ–µ –≤–∫–ª—é—á–µ–Ω–∏–µ –º–µ—Ç–∞–¥–∞–Ω–Ω—ã—Ö

2. **`get_ai_context_pages(parent_page_id, include_content=True, recursive=True)`**
   - –ü–æ–ª—É—á–∞–µ—Ç –≤—Å–µ –¥–æ—á–µ—Ä–Ω–∏–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã
   - –†–µ–∫—É—Ä—Å–∏–≤–Ω—ã–π –ø–æ–∏—Å–∫ –≤–ª–æ–∂–µ–Ω–Ω—ã—Ö —Å—Ç—Ä–∞–Ω–∏—Ü
   - –û–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ–µ –≤–∫–ª—é—á–µ–Ω–∏–µ –∫–æ–Ω—Ç–µ–Ω—Ç–∞

3. **`get_database_data_sources(database_id)`**
   - –ü–æ–ª—É—á–∞–µ—Ç data sources –∏–∑ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö (–¥–ª—è API 2025-09-03)
   - –ü–æ–º–æ–≥–∞–µ—Ç –ø—Ä–∞–≤–∏–ª—å–Ω–æ —Ä–∞–±–æ—Ç–∞—Ç—å —Å –Ω–æ–≤–æ–π –º–æ–¥–µ–ª—å—é –¥–∞–Ω–Ω—ã—Ö

### –ù–æ–≤—ã–µ API endpoints

1. **GET `/api/notion/pages/{page_id}/content`**
   - –ü–æ–ª—É—á–∞–µ—Ç –ø–æ–ª–Ω—ã–π –∫–æ–Ω—Ç–µ–Ω—Ç —Å—Ç—Ä–∞–Ω–∏—Ü—ã
   - –ü–∞—Ä–∞–º–µ—Ç—Ä `include_metadata` –¥–ª—è –≤–∫–ª—é—á–µ–Ω–∏—è –º–µ—Ç–∞–¥–∞–Ω–Ω—ã—Ö

2. **GET `/api/notion/context/pages`**
   - –ü–æ–ª—É—á–∞–µ—Ç —Å–ø–∏—Å–æ–∫ —Å—Ç—Ä–∞–Ω–∏—Ü –∏–∑ AI-Context
   - –ü–∞—Ä–∞–º–µ—Ç—Ä—ã: `parent_page_id`, `include_content`, `recursive`

3. **GET `/api/notion/databases/{database_id}/data-sources`**
   - –ü–æ–ª—É—á–∞–µ—Ç data sources –∏–∑ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö

## üîß –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ —É–ª—É—á—à–µ–Ω–∏—è

### –†–µ–∫—É—Ä—Å–∏–≤–Ω–æ–µ –ø–æ–ª—É—á–µ–Ω–∏–µ –±–ª–æ–∫–æ–≤
```python
async def _get_all_blocks_recursive(self, block_id: str):
    # 1. –ü–æ–ª—É—á–∞–µ—Ç –≤—Å–µ –±–ª–æ–∫–∏ —Å –ø–∞–≥–∏–Ω–∞—Ü–∏–µ–π
    # 2. –ü—Ä–æ–≤–µ—Ä—è–µ—Ç has_children –¥–ª—è –∫–∞–∂–¥–æ–≥–æ –±–ª–æ–∫–∞
    # 3. –†–µ–∫—É—Ä—Å–∏–≤–Ω–æ –ø–æ–ª—É—á–∞–µ—Ç –¥–æ—á–µ—Ä–Ω–∏–µ –±–ª–æ–∫–∏
```

### –£–Ω–∏–≤–µ—Ä—Å–∞–ª—å–Ω—ã–π –∑–∞–ø—Ä–æ—Å –±–∞–∑ –¥–∞–Ω–Ω—ã—Ö
```python
async def _query_database(self, database_id: str):
    # 1. –ü–æ–ª—É—á–∞–µ—Ç –±–∞–∑—É –¥–∞–Ω–Ω—ã—Ö
    # 2. –ü—Ä–æ–≤–µ—Ä—è–µ—Ç data sources (API 2025-09-03)
    # 3. –ò—Å–ø–æ–ª—å–∑—É–µ—Ç –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π ID –¥–ª—è –∑–∞–ø—Ä–æ—Å–∞
```

## üìù –í–∞–∂–Ω—ã–µ –∑–∞–º–µ—á–∞–Ω–∏—è

### API –≤–µ—Ä—Å–∏—è 2025-09-03
- –ë–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö —Ä–∞–∑–¥–µ–ª–µ–Ω—ã –Ω–∞ "–∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã" –∏ "data sources"
- –ú–µ—Ç–æ–¥ `_query_database()` –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π ID
- –î–ª—è –±–∞–∑ —Å –Ω–µ—Å–∫–æ–ª—å–∫–∏–º–∏ data sources –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –ø–µ—Ä–≤—ã–π –∏—Å—Ç–æ—á–Ω–∏–∫

### –û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è API
- API –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫—É—é —Ä–µ–∫—É—Ä—Å–∏—é –±–ª–æ–∫–æ–≤
- –ú–∞–∫—Å–∏–º—É–º 100 –±–ª–æ–∫–æ–≤ –∑–∞ –æ–¥–∏–Ω –∑–∞–ø—Ä–æ—Å (–ø–∞–≥–∏–Ω–∞—Ü–∏—è –æ–±—è–∑–∞—Ç–µ–ª—å–Ω–∞)
- –ù–µ–∫–æ—Ç–æ—Ä—ã–µ —Ç–∏–ø—ã –±–ª–æ–∫–æ–≤ —Ç—Ä–µ–±—É—é—Ç —Å–ø–µ—Ü–∏–∞–ª—å–Ω–æ–π –æ–±—Ä–∞–±–æ—Ç–∫–∏

### –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å
- –†–µ–∫—É—Ä—Å–∏–≤–Ω–æ–µ –ø–æ–ª—É—á–µ–Ω–∏–µ –º–æ–∂–µ—Ç –±—ã—Ç—å –º–µ–¥–ª–µ–Ω–Ω—ã–º –¥–ª—è –±–æ–ª—å—à–∏—Ö —Å—Ç—Ä–∞–Ω–∏—Ü
- –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ `include_content=False` –¥–ª—è –±—ã—Å—Ç—Ä–æ–≥–æ —Å–ø–∏—Å–∫–∞ —Å—Ç—Ä–∞–Ω–∏—Ü
- –†–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –∫—ç—à–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–ª—è —á–∞—Å—Ç–æ –∑–∞–ø—Ä–∞—à–∏–≤–∞–µ–º—ã—Ö —Å—Ç—Ä–∞–Ω–∏—Ü

## ‚úÖ –ò—Ç–æ–≥

–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å Notion –æ–±–Ω–æ–≤–ª–µ–Ω–∞ –∏ —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É–µ—Ç –∞–∫—Ç—É–∞–ª—å–Ω—ã–º —Ç—Ä–µ–±–æ–≤–∞–Ω–∏—è–º:
- ‚úÖ –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è API –≤–µ—Ä—Å–∏—è 2025-09-03
- ‚úÖ –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –≤—Å–µ—Ö —Ç–∏–ø–æ–≤ –±–ª–æ–∫–æ–≤
- ‚úÖ –†–µ–∫—É—Ä—Å–∏–≤–Ω–æ–µ –∏–∑–≤–ª–µ—á–µ–Ω–∏–µ –∫–æ–Ω—Ç–µ–Ω—Ç–∞
- ‚úÖ –†–∞–±–æ—Ç–∞ —Å –ø–æ–¥–∫–ª—é—á–µ–Ω–Ω—ã–º–∏ —Å—Ç—Ä–∞–Ω–∏—Ü–∞–º–∏
- ‚úÖ –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –Ω–æ–≤–æ–π –º–æ–¥–µ–ª–∏ –¥–∞–Ω–Ω—ã—Ö (data sources)

–°–∏—Å—Ç–µ–º–∞ –≥–æ—Ç–æ–≤–∞ –∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é –¥–ª—è –≤—ã–≥—Ä—É–∑–∫–∏ –¥–∞–Ω–Ω—ã—Ö –∏–∑ Notion!
