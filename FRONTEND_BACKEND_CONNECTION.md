# Подключение фронтенда к бэкенду

## Проблема: "Failed to fetch"

Фронтенд пытается подключиться к бэкенду, но получает ошибку "Failed to fetch".

## Решение

Есть два способа подключения:

### Вариант 1: Через Next.js API Routes (рекомендуется)

Фронтенд использует относительные пути `/api/tasks`, которые идут через Next.js API routes (`app/api/tasks/route.ts`), которые проксируют запросы к FastAPI бэкенду.

**Преимущества:**
- Работает даже если бэкенд не запущен (но API routes вернут ошибку)
- Нет проблем с CORS
- Единая точка входа

**Настройка:**
- Не устанавливайте `NEXT_PUBLIC_API_URL` в `.env.local`
- Фронтенд будет использовать относительные пути

### Вариант 2: Прямое подключение к бэкенду

Фронтенд подключается напрямую к FastAPI на `http://localhost:8000`.

**Преимущества:**
- Прямое подключение без прокси
- Меньше задержек

**Настройка:**
1. Убедитесь, что бэкенд запущен:
   ```bash
   cd apps/api
   source .venv/bin/activate
   uvicorn app.main:app --reload --port 8000
   ```

2. Создайте `.env.local` в `apps/web/`:
   ```env
   NEXT_PUBLIC_API_URL=http://localhost:8000
   ```

3. Перезапустите фронтенд

## Текущая конфигурация

По умолчанию фронтенд использует **Вариант 1** (относительные пути через Next.js API routes).

Если нужно прямое подключение, установите `NEXT_PUBLIC_API_URL=http://localhost:8000` в `.env.local`.

## Проверка работы

1. **Проверьте бэкенд:**
   ```bash
   curl http://localhost:8000/health
   ```

2. **Проверьте фронтенд:**
   - Откройте http://localhost:3000
   - Откройте консоль браузера (F12)
   - Проверьте Network tab на наличие ошибок

3. **Проверьте Next.js API routes:**
   ```bash
   curl http://localhost:3000/api/tasks
   ```
